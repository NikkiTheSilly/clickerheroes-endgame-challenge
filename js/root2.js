const ROOT2_BASE_HERO_NAMES = [
  "Dread",
  "Atlas",
  "Terra",
  "Phthalo",
  "Banana",
  "Lilin",
  "Cadmia",
  "Alabaster",
  "Astraea",
  "Chiron",
  "Moloch",
  "BomberMax",
  "Gog",
  "Betty",
  "Midas",
  "Wepwawet",
  "Tsuchi",
  "Skogur",
  "Moeru",
  "Zilar",
  "Madzi",
  "Xavira",
  "Cadu",
  "Ceus",
  "Maw",
  "Yachiyl",
];

const HEROES_DATA_ROOT2 = [
  ["Dread0", 55.0, 1.07, 4.0, 0, 48.0],
  ["Dread1", 55.0, 1.07, 4.0, 1000, 49.0],
  ["Dread2", 55.0, 1.07, 4.0, 2500, 52.0],
  ["Dread3", 55.0, 1.07, 4.0, 5500, 57.0],
  ["Dread4", 55.0, 1.07, 4.25, 8000, 57.0],
  ["Atlas0", 450.0, 1.07, 4.25, 0, 399.0],
  ["Atlas1", 450.0, 1.07, 4.25, 2500, 402.0],
  ["Atlas2", 450.0, 1.07, 4.25, 9500, 407.0],
  ["Atlas3", 450.0, 1.07, 4.25, 17500, 414.0],
  ["Atlas4", 450.0, 1.07, 4.5, 25000, 414.0],
  ["Terra0", 1700.0, 1.07, 4.5, 0, 1530.75],
  ["Terra1", 1700.0, 1.07, 4.5, 10000, 1533.75],
  ["Terra2", 1700.0, 1.07, 4.5, 32500, 1538.75],
  ["Terra3", 1700.0, 1.07, 4.5, 60000, 1545.75],
  ["Terra4", 1700.0, 1.07, 4.75, 80000, 1545.75],
  ["Phthalo0", 4900.0, 1.1, 9.5, 0, 4497.75],
  ["Phthalo1", 4900.0, 1.1, 9.5, 10000, 4595.75],
  ["Phthalo2", 4900.0, 1.1, 9.5, 20000, 4793.75],
  ["Phthalo3", 4900.0, 1.1, 9.5, 30000, 5091.75],
  ["Phthalo4", 4900.0, 1.1, 10.5, 44000, 5091.75],
  ["Banana0", 7000.0, 1.1, 10.5, 0, 7167.5],
  ["Banana1", 7000.0, 1.1, 10.5, 12000, 7265.5],
  ["Banana2", 7000.0, 1.1, 10.5, 28000, 7463.5],
  ["Banana3", 7000.0, 1.1, 10.5, 42000, 7761.5],
  ["Banana4", 7000.0, 1.1, 11.5, 55000, 7761.5],
  ["Lilin0", 9600.0, 1.1, 11.5, 0, 10431.25],
  ["Lilin1", 9600.0, 1.1, 11.5, 34000, 10529.25],
  ["Lilin2", 9600.0, 1.1, 11.5, 54500, 10727.25],
  ["Lilin3", 9600.0, 1.1, 11.5, 67000, 11025.25],
  ["Lilin4", 9600.0, 1.1, 12.5, 92000, 11025.25],
  ["Cadmia0", 14000.0, 1.13, 75.0, 25600, 15215.25],
  ["Alabaster0", 16000.0, 1.13, 75.0, 0, 18141.0],
  ["Astraea0", 17000.0, 1.13, 75.0, 0, 19632.0],
  ["Cadmia1", 14000.0, 1.13, 75.0, 70000, 15513.25],
  ["Alabaster1", 16000.0, 1.13, 75.0, 45000, 18439.0],
  ["Astraea1", 17000.0, 1.13, 75.0, 42000, 19930.0],
  ["Cadmia2", 14000.0, 1.13, 75.0, 115000, 15811.25],
  ["Alabaster2", 16000.0, 1.13, 75.0, 100000, 18737.0],
  ["Astraea2", 17000.0, 1.13, 75.0, 100000, 20228.0],
  ["Cadmia3", 14000.0, 1.13, 75.0, 180000, 16109.25],
  ["Alabaster3", 16000.0, 1.13, 75.0, 165000, 19035.0],
  ["Astraea3", 17000.0, 1.13, 75.0, 170000, 20526.0],
  ["Cadmia4", 14000.0, 1.13, 80.0, 250000, 16109.25],
  ["Alabaster4", 16000.0, 1.13, 85.0, 240000, 19035.0],
  ["Astraea4", 17000.0, 1.13, 90.0, 255000, 20526.0],
  ["Chiron", 33000.0, 1.16, 250.0, 100, 44106.75],
  ["Moloch", 55000.0, 1.16, 300.0, 100, 77006.75],
  ["BomberMax", 75000.0, 1.16, 350.0, 100, 107982.5],
  ["Gog", 97000.0, 1.16, 444.0, 100, 146342.25],
  ["Wepwawet", 125000.0, 1.16, 500.0, 100, 193960.25],
  ["Betty", 4.25, 1.07, 4.0, 4495225, 103000.75],
  ["Midas", 12.5, 1.07, 4.0, 4692375, 108007.5],
  ["Wepwawet", 125000.0, 1.16, 500.0, 299300, 193960.25],
  ["Tsuchi0", 150000.0, 1.19, 2500.0, 0, 235994.0],
  ["Tsuchi1", 150000.0, 1.19, 2500.0, 50000, 236992.0],
  ["Tsuchi2", 150000.0, 1.19, 2500.0, 135000, 237990.0],
  ["Tsuchi3", 150000.0, 1.19, 2500.0, 220000, 238988.0],
  ["Tsuchi4", 150000.0, 1.19, 5000.0, 285000, 238988.0],
  ["Skogur0", 175000.0, 1.19, 5000.0, 0, 289394.0],
  ["Skogur1", 175000.0, 1.19, 5000.0, 100000, 291392.0],
  ["Skogur2", 175000.0, 1.19, 5000.0, 300000, 293390.0],
  ["Skogur3", 175000.0, 1.19, 5000.0, 500000, 295388.0],
  ["Skogur4", 175000.0, 1.19, 10000.0, 600000, 295388.0],
  ["Moeru0", 250000.0, 1.19, 10000.0, 0, 455593.75],
  ["Moeru1", 250000.0, 1.19, 10000.0, 110000, 458091.75],
  ["Moeru2", 250000.0, 1.19, 10000.0, 325000, 460589.75],
  ["Moeru3", 250000.0, 1.19, 10000.0, 475000, 463087.75],
  ["Moeru4", 250000.0, 1.19, 15000.0, 670000, 463087.75],
  ["Zilar0", 315000.0, 1.19, 15000.0, 0, 607593.75],
  ["Zilar1", 315000.0, 1.19, 15000.0, 150000, 610591.75],
  ["Zilar2", 315000.0, 1.19, 15000.0, 400000, 613589.75],
  ["Zilar3", 315000.0, 1.19, 15000.0, 700000, 616587.75],
  ["Zilar4", 315000.0, 1.19, 20000.0, 1000000, 616587.75],
  ["Madzi0", 420000.0, 1.19, 20000.0, 0, 859593.5],
  ["Madzi1", 420000.0, 1.19, 20000.0, 150000, 863091.5],
  ["Madzi2", 420000.0, 1.19, 20000.0, 400000, 866589.5],
  ["Madzi3", 420000.0, 1.19, 20000.0, 700000, 870087.5],
  ["Madzi4", 420000.0, 1.19, 25000.0, 1000000, 870087.5],
  ["Xavira0", 510000.0, 1.22, 150000.0, 0, 1080993.5],
  ["Xavira1", 510000.0, 1.22, 150000.0, 750000, 1085991.5],
  ["Xavira2", 510000.0, 1.22, 150000.0, 1000000, 1090989.5],
  ["Xavira3", 510000.0, 1.22, 150000.0, 1250000, 1095987.5],
  ["Xavira4", 510000.0, 1.22, 150000.0, 1500000, 1100985.5],
  ["Xavira5", 510000.0, 1.22, 150000.0, 1800000, 1105983.5],
  ["Cadu0", 700000.0, 1.22, 200000.0, 0, 1566544.25],
  ["Ceus1", 700000.0, 1.22, 200000.0, 495000, 1571542.25],
  ["Cadu1", 700000.0, 1.22, 200000.0, 850000, 1576542.25],
  ["Ceus2", 700000.0, 1.22, 200000.0, 1350000, 1581540.25],
  ["Cadu2", 700000.0, 1.22, 200000.0, 1800000, 1586540.25],
  ["Ceus3", 700000.0, 1.22, 200000.0, 2250000, 1591538.25],
  ["Cadu3", 700000.0, 1.22, 200000.0, 2800000, 1596538.25],
  ["Ceus4", 700000.0, 1.22, 250000.0, 3100000, 1591538.25],
  ["Cadu4", 700000.0, 1.22, 300000.0, 3500000, 1596538.25],
  ["Maw0", 1050000.0, 1.22, 300000.0, 0, 2486593.0],
  ["Maw1", 1050000.0, 1.22, 300000.0, 750000, 2496591.0],
  ["Maw2", 1050000.0, 1.22, 300000.0, 1500000, 2507589.0],
  ["Maw3", 1050000.0, 1.22, 300000.0, 2250000, 2519587.0],
  ["Maw4", 1050000.0, 1.22, 300000.0, 3000000, 2532585.0],
  ["Maw5", 1050000.0, 1.22, 300000.0, 3750000, 2546583.0],
  ["Maw6", 1050000.0, 1.22, 400000.0, 4500000, 2546583.0],
  ["Yachiyl0", 1475000.0, 1.22, 500000.0, 0, 3677116.0],
  ["Yachiyl1", 1475000.0, 1.22, 500000.0, 1500000, 3705114.0],
  ["Yachiyl2", 1475000.0, 1.22, 500000.0, 3200000, 3734112.0],
  ["Yachiyl3", 1475000.0, 1.22, 500000.0, 4900000, 3764110.0],
  ["Yachiyl4", 1475000.0, 1.22, 500000.0, 6600000, 3795108.0],
  ["Yachiyl5", 1475000.0, 1.22, 500000.0, 8400000, 3827106.0],
  ["Yachiyl6", 1475000.0, 1.22, 500000.0, 10400000, 3860104.0],
  ["Yachiyl7", 1475000.0, 1.055, 1000000.0, 12100000, 3860104.0],
];

const MAX_ROOT2_UPGRADE_NUMBER = HEROES_DATA_ROOT2.reduce((max, hero) => {
  const upgradeNumber = parseInt(hero[0].at(-1));

  // Rose3 -> "3" -> 3
  // Tsuchi -> "i" -> NaN -> 0
  return Math.max(max, isNaN(upgradeNumber) ? 0 : upgradeNumber);
}, 0);

const heroStatesRoot2 = {
  Dread0: true,
  Dread1: true,
  Dread2: true,
  Dread3: true,
  Dread4: true,
  Atlas0: true,
  Atlas1: true,
  Atlas2: true,
  Atlas3: true,
  Atlas4: true,
  Terra0: true,
  Terra1: true,
  Terra2: true,
  Terra3: true,
  Terra4: true,
  Phthalo0: true,
  Phthalo1: true,
  Phthalo2: true,
  Phthalo3: true,
  Phthalo4: true,
  Banana0: true,
  Banana1: true,
  Banana2: true,
  Banana3: true,
  Banana4: true,
  Lilin0: true,
  Lilin1: true,
  Lilin2: true,
  Lilin3: true,
  Lilin4: true,
  Cadmia0: true,
  Alabaster0: true,
  Astraea0: true,
  Cadmia1: true,
  Alabaster1: true,
  Astraea1: true,
  Cadmia2: true,
  Alabaster2: true,
  Astraea2: true,
  Cadmia3: true,
  Alabaster3: true,
  Astraea3: true,
  Cadmia4: true,
  Alabaster4: true,
  Astraea4: true,
  Chiron: true,
  Moloch: true,
  BomberMax: true,
  Gog: true,
  Wepwawet: true,
  Betty: true,
  Midas: true,
  Wepwawet: true,
  Tsuchi0: true,
  Tsuchi1: true,
  Tsuchi2: true,
  Tsuchi3: true,
  Tsuchi4: true,
  Skogur0: true,
  Skogur1: true,
  Skogur2: true,
  Skogur3: true,
  Skogur4: true,
  Moeru0: true,
  Moeru1: true,
  Moeru2: true,
  Moeru3: true,
  Moeru4: true,
  Zilar0: true,
  Zilar1: true,
  Zilar2: true,
  Zilar3: true,
  Zilar4: true,
  Madzi0: true,
  Madzi1: true,
  Madzi2: true,
  Madzi3: true,
  Madzi4: true,
  Xavira0: true,
  Xavira1: true,
  Xavira2: true,
  Xavira3: true,
  Xavira4: true,
  Xavira5: true,
  Cadu0: true,
  Ceus1: true,
  Cadu1: true,
  Ceus2: true,
  Cadu2: true,
  Ceus3: true,
  Cadu3: true,
  Ceus4: true,
  Cadu4: true,
  Maw0: true,
  Maw1: true,
  Maw2: true,
  Maw3: true,
  Maw4: true,
  Maw5: true,
  Maw6: true,
  Yachiyl0: true,
  Yachiyl1: true,
  Yachiyl2: true,
  Yachiyl3: true,
  Yachiyl4: true,
  Yachiyl5: true,
  Yachiyl6: true,
  Yachiyl7: true,
};

const UPGRADELESS_HEROES_ROOT2 = [
  "Chiron",
  "Moloch",
  "BomberMax",
  "Gog",
  "Wepwawet",
  "Betty",
  "Midas",
];

let HEROES_ROOT2;

var ROOT2_BREAKPOINTS = [
  [0, 0.02, 1.145, 140],
  [70, 0.03, 1.16, 5000],
  [300, 0.04, 1.175, 20000],
  [1250, 0.06, 1.3, 65000],
  [2550, 0.07, 1.3, 65000],
  [4000, 0.08, 1.3, 65000],
  [6400, 0.1, 1.354, 150000],
  [18000, 0.15, 1.45, 250000],
  [40000, 0.2, 1.55, 360000],
  [65000, 0.25, 1.65, 370000],
  [102000, 0.3, 1.75, 380000],
  [145000, 0.35, 1.85, 480000],
  [190000, 0.4, 1.95, 500000],
  [240000, 0.45, 2.1, 1000000],
  [350000, 0.5, 2.3, 1200000],
  [485000, 0.55, 2.45, 1400000],
  [666000, 0.6, 2.65, 1500000],
  [840000, 0.7, 3.0, 2000000],
  [1200000, 0.8, 3.3, 2500000],
  [1950000, 0.9, 3.6, 3000000],
  [2850000, 1.0, 4.0, 3500000],
];

function root2_tp(as) {
  let tp = 0;
  for (i = 0; i < ROOT2_BREAKPOINTS.length; i++) {
    if (as >= ROOT2_BREAKPOINTS[i][0]) {
      tp = ROOT2_BREAKPOINTS[i][1];
    }
  }
  return tp;
}

function root2_customized_bps(as) {
  let bp = [];
  for (i = 0; i < ROOT2_BREAKPOINTS.length; i++) {
    if (as >= ROOT2_BREAKPOINTS[i][0]) {
      bp.push(ROOT2_BREAKPOINTS[i]);
    }
  }
  return bp;
}
